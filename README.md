# IOT_Server
Written in Node, and compatible with any device that can send HTTP messages, and JSON formatted Data.

## Overview
This is a general purpose IOT server, that takes JSON input data. The server takes two types of methods POST webhooks, and Get requests.

Each of these methods has different event types that are declared within the JSON format. Below is a table listing all event types avaliable:

|eventType|Method|Function|
|----|---|----|
|connect|POST|generates and returns deviceID|
|update|POST|Updates the server with sensor information|
|test|POST|For sending test signals confirming connection|
|pull|POST|For retrieving sensor data files|

## JSON Structure
ALL devices must send JSON in the following format, but not all postions need to be populated:

```
    {
      deviceID: //Only needed after intially connecting, is the reference to the server)
      time: //The time that the message is sent
      event: {
        eventType: //This is one of the eventTypes in the above table
        parameters: [] //Must be a list
              }
      deviceType: //Unique device type, that partly determines the deviceID
      sensorTypes: [] //Must be a list of the different sensors connected to the device
      sensorData: [] //Must be a list comprised of the data values from the sensorTypes list
      group: //Optional group number
      location: //Optional location
      file: //Optional filename
    }
```
## Setting up server

#### 1. Connecting Devices

  In order to be able to sufficiently communicate with the server, a device must have a deviceID that is generated by the server. In order to generate this ID a device must initially send a POST webhook, with a connect eventType. An example is below:
 ```
  {
    deviceID:
    time: 123456
    event: {
      eventType: connect
      parameters: []
            }
    deviceType: sensorBoard
    sensorTypes: [lux,CO2,accelerometer]
    sensorData: []
    group:
    location:
    file:
   }
```
After the deviceID is generated, a few things will unfold. The first of these is that the server will respond with JSON data of its own (a slightly different format), with the inclusion of the new deviceID. This value will be under the JSON value "response". Simultaneously the server will log the NEW device ID, along with the connection information.

#### 2. Updating Data and Sensor Information

